#!/bin/sh
# get script directory
DOTFILES_DIR=$(readlink -m "${0%/*}")
echo "Global config directory: "\"$DOTFILES_DIR\"""
# prompt user
echo "WARNING: This will destroy any existing config files!"
read -p "Setup global config? (y/n) " ans
case $ans in
	y|Y) ;;
	*) exit;;
esac
# show commands
set -x
# remove default config files/dirs
echo "Removing old config..."
rm $HOME/.vimrc        # rm  vim- config
rm -rf $HOME/.vim      # rm  vim- config directory + plugins
rm $HOME/.zshrc        # rm  zsh- config
rm -rf $HOME/.zsh      # rm  zsh- config directory + plugins
rm -rf $HOME/.zprofile # rm  zsh- profile
rm $HOME/.tmux.conf    # rm tmux- config
# link global config
echo "Copying new config..."
ln -s $DOTFILES_DIR/vim/vimrc $HOME/.vimrc           #  vim- config
mkdir $HOME/.vim                                     #  vim- config directory
ln -s $DOTFILES_DIR/vim/colors $HOME/.vim/colors     #  vim- colorscheme
ln -s $DOTFILES_DIR/vim/syntax $HOME/.vim/syntax     #  vim- syntax
ln -s $DOTFILES_DIR/vim/pathogen/* $HOME/.vim        #  vim- pathogen
ln -s $DOTFILES_DIR/vim/snippets $HOME/.vim/snippets #  vim- snipmate snippets
ln -s $DOTFILES_DIR/vim/bundle $HOME/.vim/bundle     #  vim- plugins
ln -s $DOTFILES_DIR/zsh/zshrc $HOME/.zshrc           #  zsh- config
ln -s $DOTFILES_DIR/zsh/zprofile $HOME/.zprofile     #  zsh- profile
mkdir $HOME/.zsh                                     #  zsh- config directory
ln -s $DOTFILES_DIR/zsh/plugin $HOME/.zsh/plugin     #  zsh- plugins
ln -s $DOTFILES_DIR/tmux/tmux.conf $HOME/.tmux.conf  # tmux- config
# additional actions
echo "Compiling command-t (vim plugin)..."
cd $HOME/.vim/bundle/command-t
rake make
