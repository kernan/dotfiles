# gsettings
exec_always import-gsettings \
    gtk-theme:gtk-theme-name \
    icon-theme:gtk-icon-theme-name \
    cursor-theme:gtk-cursor-theme-name

# autostart
exec autotiling
exec mako
exec kanshi

# logo key
set $mod Mod4

# home-row directions
set $left  h
set $down  j
set $up    k
set $right l

# wallpaper
set $wallpaper ~/Pictures/wallpaper.png

# terminal
set $term kitty

# launcher
set $menu $term --detach --class='launcher' ~/bin/fzf-sway run
set $pass $term --detach --class='launcher' ~/bin/fzf-sway pass
for_window [app_id="^launcher$"] {
    floating enable
    resize set 640 480
    move position center
}

# locker
set $locker swaylock -i $wallpaper

# floating clients
for_window [app_id="^pavucontrol$"] floating enable
for_window [app_id="^nm-connection-editor$"] floating enable

# idle config
exec swayidle -w \
         timeout 300 '$locker -f' \
         timeout 600 'swaymsg "output * dpms off"' \
              resume 'swaymsg "output * dpms on"' \
         before-sleep '$locker -f'

# exit sway
bindsym $mod+Shift+e exec swaymsg exit

# lock
bindsym $mod+Escape exec $locker

# colors
set $cl_high #009ddc
set $cl_indi #d9d8d8
set $cl_back #231f20
set $cl_fore #d9d8d8
set $cl_urge #ee2e24

client.focused          $cl_high $cl_high $cl_fore $cl_indi $cl_high
client.focused_inactive $cl_back $cl_back $cl_fore $cl_back $cl_back
client.unfocused        $cl_back $cl_back $cl_fore $cl_back $cl_back
client.urgent           $cl_urge $cl_urge $cl_fore $cl_urge $cl_urge

# font
font Fira Sans 11

# window borders
default_border pixel 1
default_floating_border normal
hide_edge_borders smart

# window gaps
smart_gaps on
gaps inner 3

# desktop background
output * background $wallpaper fill

# launch programs
bindsym $mod+Return exec $term
bindsym $mod+r exec $menu
bindsym $mod+p exec $pass

# split
bindsym $mod+s splitv
bindsym $mod+v splith

# container focus
bindsym $mod+$left  focus left
bindsym $mod+$down  focus down
bindsym $mod+$up    focus up
bindsym $mod+$right focus right

bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# toggle container fullscreen
bindsym $mod+f fullscreen toggle

# kill container
bindsym $mod+x kill

# drag floating containers
floating_modifier $mod normal

# move container
bindsym $mod+Shift+$left  move left
bindsym $mod+Shift+$down  move down
bindsym $mod+Shift+$up    move up
bindsym $mod+Shift+$right move right

bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# workspace switch
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 0

# move container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 0

# toggle floating container
bindsym $mod+Space floating toggle

# resize container
mode "resize" {
    bindsym $left  resize shrink width 10px
    bindsym $down  resize grow   height 10px
    bindsym $up    resize shrink height 10px
    bindsym $right resize grow   width 10px

    bindsym Left  resize shrink width 10px
    bindsym Down  resize grow   height 10px
    bindsym Up    resize shrink height 10px
    bindsym Right resize grow   width 10px
    # exit
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Shift+r mode "resize"

# volume control
bindsym --locked XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
bindsym --locked XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
bindsym --locked XF86AudioMute        exec --no-startup-id pactl set-sink-mute   @DEFAULT_SINK@ toggle

# brightness control
bindsym --locked XF86MonBrightnessUp   exec --no-startup-id brightnessctl set +5%
bindsym --locked XF86MonBrightnessDown exec --no-startup-id brightnessctl set 5%-

# statusbar
bar {
    swaybar_command waybar
}

# load system-specific config
include ~/.config/sway/`hostname`/*

exec systemd-notify --ready || true
